<?xml version="1.0" encoding="UTF-8"?>
<!--
  #%L
  Compi Core
  %%
  Copyright (C) 2016 - 2018 Daniel Glez-Peña, Osvaldo Graña-Castro, Hugo
  			López-Fernández, Jesús Álvarez Casanova
  %%
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public
  License along with this program.  If not, see
  <http://www.gnu.org/licenses/gpl-3.0.html>.
  #L%
  -->

<pipeline xmlns="http://www.sing-group.org/compi/pipeline-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<tasks>
		<task 
			id="ID1"
			params="text runId1"
			if='[ "$runId1" == "yes" ]'>
				echo ${text} > ${destination}
		</task>
		<foreach
			id="ID2"
			params="runId2" 
			if='[ "$runId2" == "yes" ]'			
			of="list" in="2,1,1" as="param" after="ID1"> 
			
			echo ${param}
		</foreach>
		<task id="ID3" if="error command">
				echo "this will not run since an invalid command outputs a value distinct than 0"
		</task>
	</tasks>
	<params>
		<param name="runId1" shortName="r1" defaultValue="yes">Run task ID1</param>
		<param name="runId2" shortName="r2" defaultValue="yes">Run task ID2</param>
		<param name="text" shortName="c">The text to write</param>
		<param name="destination" shortName="d" global="true">The output file to write into</param>
	</params>
</pipeline>
